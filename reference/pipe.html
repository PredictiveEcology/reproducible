<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>A cache-aware pipe (currently not working) — pipe • reproducible</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="A cache-aware pipe (currently not working) — pipe"><meta property="og:description" content="
With updates to magrittr to version 2.0, this Cache pipe is now broken.
We are working on an update.
This pipe can only be used at any point in a pipe chain, but must
be preceded by Cache(...) (which allows other Cache()
%C% ... remaining pipes
arguments to be passed).
This will take the input arguments of the first function immediately following
the Cache() and the pipe chain until the special %C%,
evaluate them both against the cacheRepo argument in Cache.
If they exist, then the entire pipe chain will be skipped, and only the
previous final result will be given.
If there is no previous cached copy of the initial function's arguments,
then all chain elements will be evaluated.
The final result will be cached for future use.
Therefore, the entire chain must be identical.
The required usage should be straight forward to insert into existing code
that uses pipes (Cache() %C% ... remaining pipes).
Still experimental and may change. This form cannot pass any arguments to
]codeCache, such as cacheRepo, thus it is of limited utility. However,
it is a clean alternative for simple cases."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproducible</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.11</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Cache-using-postgresql.html">Using alternate database backends for Cache</a>
    </li>
    <li>
      <a href="../articles/Intro-to-Cache.html">Introduction to Cache</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PredictiveEcology/reproducible/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>A cache-aware pipe (currently not working)</h1>
    <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/reproducible/blob/HEAD/R/pipe.R" class="external-link"><code>R/pipe.R</code></a></small>
    <div class="hidden name"><code>pipe.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><img src="figures/lifecycle-experimental.svg" alt="experimental"></p>
<p>With updates to <code>magrittr</code> to version 2.0, this Cache pipe is now broken.
We are working on an update.</p>
<p>This pipe can only be used at any point in a pipe chain, but must
be preceded by <code>Cache(...)</code> (which allows other <code>Cache()
%C% ... remaining pipes</code>
arguments to be passed).</p>
<p>This will take the input arguments of the first function immediately following
the <code><a href="Cache.html">Cache()</a></code> and the pipe chain until the special <code>%C%</code>,
evaluate them both against the <code>cacheRepo</code> argument in <code>Cache</code>.
If they exist, then the entire pipe chain will be skipped, and only the
previous final result will be given.
If there is no previous cached copy of the initial function's arguments,
then all chain elements will be evaluated.
The final result will be cached for future use.
Therefore, the entire chain must be identical.
The required usage should be straight forward to insert into existing code
that uses pipes (<code>Cache() %C% ... remaining pipes</code>).</p>
<p>Still experimental and may change. This form cannot pass any arguments to
]codeCache, such as <code>cacheRepo</code>, thus it is of limited utility. However,
it is a clean alternative for simple cases.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="va">lhs</span> <span class="op">%C%</span> <span class="va">rhs</span></span>
<span></span>
<span><span class="va">lhs</span> <span class="op">%&lt;%</span> <span class="va">rhs</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>lhs</dt>
<dd><p>A name to assign to.</p></dd>


<dt>rhs</dt>
<dd><p>A function call</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># THIS IS CURRENTLY BROKEN DUE TO UPGRADES TO INTERNALS OF magrittr %&gt;%</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># these can't be automatically run due to package conflicts with magrittr</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># standard pipe</span></span></span>
<span class="r-in"><span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"testCache"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://Require.predictiveecology.org/reference/checkPath.html" class="external-link">checkPath</a></span><span class="op">(</span><span class="va">tmpdir</span>, create <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpteydN6/testCache"</span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">16</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="va">.</span>, <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span>cacheRepo <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span> <span class="op">%C%</span> <span class="co"># use of the %C% pipe!</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">16</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># everything after here is NOT cached!</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="va">.</span>, <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Called from: Cache(cacheRepo = tmpdir) %C% rnorm(10, 16)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- list(eval(lhs[[1]]), ._pipe = parse(text = paste(c(lhs, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     rhss), collapse = " %&gt;% ")), ._pipeFn = as.character(lhs[[1]]), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ._lhs = quote(lhs), ._rhss = quote(rhss), ._envir = parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- append(args, lapply(cacheArgs, eval, envir = parent, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enclos = parent))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: result &lt;- withVisible(do.call("Cache", args))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: cmpdPipe &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (length(pipes) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (cmpdPipe) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- eval(call("&lt;-", lhs, result[["value"]]), parent, parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (result[["visible"]]) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ret &lt;- result[["value"]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (result[["visible"]]) ret &lt;- result[["value"]] else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: ret &lt;- result[["value"]]</span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span>cacheRepo <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span> <span class="op">%C%</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">16</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="va">.</span>, <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Called from: Cache(cacheRepo = tmpdir) %C% rnorm(10, 16)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- list(eval(lhs[[1]]), ._pipe = parse(text = paste(c(lhs, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     rhss), collapse = " %&gt;% ")), ._pipeFn = as.character(lhs[[1]]), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ._lhs = quote(lhs), ._rhss = quote(rhss), ._envir = parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- append(args, lapply(cacheArgs, eval, envir = parent, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enclos = parent))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: result &lt;- withVisible(do.call("Cache", args))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">  ...(Object to retrieve (c0ce50be720d40a8.rds))</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">     loaded cached result from previous 'rnorm, mean' pipe sequence call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: cmpdPipe &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (length(pipes) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (cmpdPipe) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- eval(call("&lt;-", lhs, result[["value"]]), parent, parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (result[["visible"]]) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ret &lt;- result[["value"]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (result[["visible"]]) ret &lt;- result[["value"]] else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: ret &lt;- result[["value"]]</span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span>cacheRepo <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span> <span class="op">%C%</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">16</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="va">.</span>, <span class="fl">5</span><span class="op">)</span> <span class="co"># changed</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Called from: Cache(cacheRepo = tmpdir) %C% rnorm(10, 16)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- list(eval(lhs[[1]]), ._pipe = parse(text = paste(c(lhs, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     rhss), collapse = " %&gt;% ")), ._pipeFn = as.character(lhs[[1]]), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ._lhs = quote(lhs), ._rhss = quote(rhss), ._envir = parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- append(args, lapply(cacheArgs, eval, envir = parent, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enclos = parent))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: result &lt;- withVisible(do.call("Cache", args))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">  ...(Object to retrieve (c0ce50be720d40a8.rds))</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">     loaded cached result from previous 'rnorm, mean' pipe sequence call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: cmpdPipe &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (length(pipes) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (cmpdPipe) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- eval(call("&lt;-", lhs, result[["value"]]), parent, parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (result[["visible"]]) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ret &lt;- result[["value"]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (result[["visible"]]) ret &lt;- result[["value"]] else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: ret &lt;- result[["value"]]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">b</span>,<span class="va">d</span><span class="op">)</span> <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">d</span><span class="op">)</span> <span class="co"># different because 'a' uses a unique rnorm, 'd' uses the Cached rnorm</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Mean relative difference: 0.06114944"</span>
<span class="r-in"><span>               <span class="co">#   because the arguments to rnorm, i.e., 10 and 16, and</span></span></span>
<span class="r-in"><span>               <span class="co">#   the subsequent functions in the chain, are identical</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">e</span><span class="op">)</span> <span class="co"># different because the final function, prod, has a changed argument.</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Mean relative difference: 0.1157088"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">###########</span></span></span>
<span class="r-in"><span><span class="co"># multiple random elements shows Cached sequence up to %C%</span></span></span>
<span class="r-in"><span><span class="va">a1</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span>cacheRepo <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">2</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%C%</span>                <span class="co"># Cache pipe here --</span></span></span>
<span class="r-in"><span>                                 <span class="co"># means this pipe is the last one that is Cached</span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">3</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">4</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span>  <span class="co"># Random 4 numbers, the mean is same each time</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Called from: Cache(cacheRepo = tmpdir) %&gt;% seq(1, 10) %&gt;% rnorm(2, mean = .) %&gt;% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mean() %C% rnorm(3, mean = .)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- list(eval(lhs[[1]]), ._pipe = parse(text = paste(c(lhs, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     rhss), collapse = " %&gt;% ")), ._pipeFn = as.character(lhs[[1]]), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ._lhs = quote(lhs), ._rhss = quote(rhss), ._envir = parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- append(args, lapply(cacheArgs, eval, envir = parent, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enclos = parent))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: result &lt;- withVisible(do.call("Cache", args))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: cmpdPipe &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (length(pipes) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (cmpdPipe) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- eval(call("&lt;-", lhs, result[["value"]]), parent, parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (result[["visible"]]) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ret &lt;- result[["value"]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (result[["visible"]]) ret &lt;- result[["value"]] else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: ret &lt;- result[["value"]]</span>
<span class="r-in"><span><span class="va">a2</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span>cacheRepo <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">2</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%C%</span>                <span class="co"># Cache pipe here --</span></span></span>
<span class="r-in"><span>                                 <span class="co"># means this pipe is the last one that is Cached</span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">3</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">4</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span>  <span class="co"># Random 4 numbers, the mean is same each time</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Called from: Cache(cacheRepo = tmpdir) %&gt;% seq(1, 10) %&gt;% rnorm(2, mean = .) %&gt;% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mean() %C% rnorm(3, mean = .)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- list(eval(lhs[[1]]), ._pipe = parse(text = paste(c(lhs, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     rhss), collapse = " %&gt;% ")), ._pipeFn = as.character(lhs[[1]]), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ._lhs = quote(lhs), ._rhss = quote(rhss), ._envir = parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- append(args, lapply(cacheArgs, eval, envir = parent, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enclos = parent))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: result &lt;- withVisible(do.call("Cache", args))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">  ...(Object to retrieve (3ca383481492d0b0.rds))</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">     loaded cached result from previous 'seq, rnorm, mean, rnorm' pipe sequence call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: cmpdPipe &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (length(pipes) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (cmpdPipe) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- eval(call("&lt;-", lhs, result[["value"]]), parent, parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (result[["visible"]]) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ret &lt;- result[["value"]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (result[["visible"]]) ret &lt;- result[["value"]] else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: ret &lt;- result[["value"]]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">a1</span> <span class="op">-</span> <span class="va">a2</span><span class="op">)</span> <span class="co"># not 0 # i.e., numbers are different</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -0.7357814</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># NOW DO WITH CACHE AT END</span></span></span>
<span class="r-in"><span><span class="va">b1</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span>cacheRepo <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">2</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>                                 <span class="co"># means this pipe is the last one that is Cached</span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">3</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">%C%</span>               <span class="co"># Cache pipe here --</span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">4</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span>        <span class="co"># These are samethe mean is same each time</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Called from: Cache(cacheRepo = tmpdir) %&gt;% seq(1, 10) %&gt;% rnorm(2, mean = .) %&gt;% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mean() %&gt;% rnorm(3, mean = .) %&gt;% mean(.) %C% rnorm(4, mean = .)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- list(eval(lhs[[1]]), ._pipe = parse(text = paste(c(lhs, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     rhss), collapse = " %&gt;% ")), ._pipeFn = as.character(lhs[[1]]), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ._lhs = quote(lhs), ._rhss = quote(rhss), ._envir = parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- append(args, lapply(cacheArgs, eval, envir = parent, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enclos = parent))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: result &lt;- withVisible(do.call("Cache", args))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: cmpdPipe &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (length(pipes) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (cmpdPipe) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- eval(call("&lt;-", lhs, result[["value"]]), parent, parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (result[["visible"]]) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ret &lt;- result[["value"]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (result[["visible"]]) ret &lt;- result[["value"]] else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: ret &lt;- result[["value"]]</span>
<span class="r-in"><span><span class="va">b2</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span>cacheRepo <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">2</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>                                 <span class="co"># means this pipe is the last one that is Cached</span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">3</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">%C%</span>               <span class="co"># Cache pipe here --</span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">4</span>, mean <span class="op">=</span> <span class="va">.</span><span class="op">)</span>        <span class="co"># These are samethe mean is same each time</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Called from: Cache(cacheRepo = tmpdir) %&gt;% seq(1, 10) %&gt;% rnorm(2, mean = .) %&gt;% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mean() %&gt;% rnorm(3, mean = .) %&gt;% mean(.) %C% rnorm(4, mean = .)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- list(eval(lhs[[1]]), ._pipe = parse(text = paste(c(lhs, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     rhss), collapse = " %&gt;% ")), ._pipeFn = as.character(lhs[[1]]), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ._lhs = quote(lhs), ._rhss = quote(rhss), ._envir = parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: args &lt;- append(args, lapply(cacheArgs, eval, envir = parent, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     enclos = parent))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: result &lt;- withVisible(do.call("Cache", args))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">  ...(Object to retrieve (a048b89a8eeb8f74.rds))</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">     loaded cached result from previous 'seq, rnorm, mean, rnorm, mean, rnorm' pipe sequence call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: cmpdPipe &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (length(pipes) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (identical(pipes[[1L]], quote(`%&lt;&gt;%`))) cmpdPipe &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (cmpdPipe) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- eval(call("&lt;-", lhs, result[["value"]]), parent, parent)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (result[["visible"]]) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ret &lt;- result[["value"]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: if (result[["visible"]]) ret &lt;- result[["value"]] else ret &lt;- invisible(result[["value"]])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> debug: ret &lt;- result[["value"]]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">b1</span> <span class="op">-</span> <span class="va">b2</span><span class="op">)</span> <span class="co"># 0 # i.e., numbers are same</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">tmpdir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Equivalent</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cache.html">Cache</a></span><span class="op">(</span><span class="va">rnorm</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">No cacheRepo supplied and getOption('reproducible.cachePath') is inside a temporary directory;</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">  this will not persist across R sessions.</span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">%&lt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">No cacheRepo supplied and getOption('reproducible.cachePath') is inside a temporary directory;</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">  this will not persist across R sessions.</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">  ...(Object to retrieve (7072c305d8c69df0.rds))</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">     loaded cached result from previous rnorm call</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eliot J B McIntire, Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

