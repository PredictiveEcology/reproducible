<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Crop a Spatial* or Raster* object — cropInputs • reproducible</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Crop a Spatial* or Raster* object — cropInputs"><meta property="og:description" content="This function is deprecated. Use cropTo. If used, all arguments will be passed
to cropTo anyway.
fixErrors --&amp;gt; fixErrosTerra
Deprecated. Use projectTo().
maskInputs is deprecated. Use maskTo()
See writeTo()"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproducible</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Intro-to-Cache.html">Introduction to Cache</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PredictiveEcology/reproducible/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Crop a <code>Spatial*</code> or <code>Raster*</code> object</h1>
    <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/reproducible/blob/HEAD/R/postProcess.R" class="external-link"><code>R/postProcess.R</code></a></small>
    <div class="hidden name"><code>deprecated.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is deprecated. Use <code>cropTo</code>. If used, all arguments will be passed
to <code>cropTo</code> anyway.</p>
<p><code>fixErrors</code> --&gt; <code>fixErrosTerra</code></p>
<p>Deprecated. Use <code><a href="postProcessTo.html">projectTo()</a></code>.</p>
<p><code>maskInputs</code> is deprecated. Use <code><a href="postProcessTo.html">maskTo()</a></code></p>
<p>See <code><a href="postProcessTo.html">writeTo()</a></code></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cropInputs</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">studyArea</span>,</span>
<span>  <span class="va">rasterToMatch</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.verbose"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">cropInputs</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fixErrors</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">objectName</span>,</span>
<span>  attemptErrorFixes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useCache <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.useCache"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.verbose"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  testValidity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.testValidity"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">fixErrors</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">objectName</span>,</span>
<span>  attemptErrorFixes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  useCache <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.useCache"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.verbose"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  testValidity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.testValidity"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">projectInputs</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">targetCRS</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.verbose"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">projectInputs</span><span class="op">(</span><span class="va">x</span>, <span class="va">targetCRS</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">maskInputs</span><span class="op">(</span><span class="va">x</span>, <span class="va">studyArea</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">writeOutputs</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.overwrite"</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.verbose"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">writeOutputs</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.overwrite"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.verbose"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>The object save to disk i.e., write outputs</p></dd>


<dt>studyArea</dt>
<dd><p><code>SpatialPolygons*</code> object used for masking and possibly cropping
if no <code>rasterToMatch</code> is provided.
If not in same CRS, then it will be <code>spTransform</code>ed to
CRS of <code>x</code> before masking. Currently, this function will not reproject the
<code>x</code>. Optional in <code>postProcess</code>.</p></dd>


<dt>rasterToMatch</dt>
<dd><p>Template <code>Raster*</code> object passed to the <code>to</code> argument of
<code><a href="postProcessTo.html">projectTo()</a></code>, thus will changing the
resolution and projection of <code>x</code>.
See details in <code><a href="postProcessTo.html">postProcessTo()</a></code>.</p></dd>


<dt>verbose</dt>
<dd><p>Numeric, -1 silent (where possible), 0 being very quiet,
1 showing more messaging, 2 being more messaging, etc.
Default is 1. Above 3 will output much more information about the internals of
Caching, which may help diagnose Caching challenges. Can set globally with an
option, e.g., <code>options('reproducible.verbose' = 0) to reduce to minimal</code></p></dd>


<dt>...</dt>
<dd><p>Passed into <code><a href="postProcessTo.html">writeTo()</a></code></p></dd>


<dt>objectName</dt>
<dd><p>Optional. This is only for messaging; if provided, then messages relayed
to user will mention this.</p></dd>


<dt>attemptErrorFixes</dt>
<dd><p>Will attempt to fix known errors. Currently only some failures
for <code>SpatialPolygons*</code> are attempted.
Notably with <code>terra::buffer(..., width = 0)</code>.
Default <code>TRUE</code>, though this may not be the right action for all cases.</p></dd>


<dt>useCache</dt>
<dd><p>Logical, default <code>getOption("reproducible.useCache", FALSE)</code>, whether
Cache is used on the internal <code><a href="https://rdrr.io/pkg/terra/man/buffer.html" class="external-link">terra::buffer</a></code> command.</p></dd>


<dt>testValidity</dt>
<dd><p>Logical. If <code>TRUE</code>, the a test for validity will happen
before actually running buffering (which is the solution in most
cases). However, sometimes it takes longer to test for validity
than just buffer without testing (there are no consequences of
buffering if everything is valid). If <code>FALSE</code>, then the
test will be skipped and the buffering will happen regardless.
If <code>NA</code>, then all testing and buffering will be skipped.</p></dd>


<dt>targetCRS</dt>
<dd><p>The CRS of x at the end  of this function (i.e., the goal)</p></dd>


<dt>overwrite</dt>
<dd><p>Logical. Should file being written overwrite an existing file if it exists.</p></dd>


<dt>cores</dt>
<dd><p>An <code>integer*</code> or <code>'AUTO'</code>. This will be used if <code>gdalwarp</code> is
triggered. <code>'AUTO'*</code> will calculate 90% of the total
number of cores in the system, while an integer or rounded
float will be passed as the exact number of cores to be used.</p></dd>


<dt>filename2</dt>
<dd><p>File name passed to <code><a href="postProcessTo.html">writeTo()</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A GIS file (e.g., RasterLayer, SpatRaster etc.) that has been
appropriately cropped.</p>


<p>A GIS file (e.g., RasterLayer, SpatRaster etc.) that has been
attempted to be fixed, if it finds errors.</p>


<p>A file of the same type as starting, but with projection (and possibly
other characteristics, including resolution, origin, extent if changed).</p>


<p>A GIS file (e.g., RasterLayer, SpatRaster etc.) that has been
appropriately reprojected.</p>


<p>A GIS file (e.g., RasterLayer, SpatRaster etc.) that has been
appropriately masked.</p>


<p>A GIS file (e.g., SpatRaster etc.) that has been
appropriately written to disk. In the case of vector datasets, this will
be a side effect. In the case of gridded objects (Raster*, SpatRaster), the
object will have a file-backing.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="fixErrorsIn.html">fixErrorsIn()</a></code>, <code><a href="postProcessTo.html">postProcessTo()</a></code>, <code><a href="postProcess.html">postProcess()</a></code></p>
<p><code><a href="postProcessTo.html">projectTo()</a></code></p>
<p><code><a href="postProcessTo.html">maskTo()</a></code>, <code><a href="postProcessTo.html">postProcessTo()</a></code> for related examples</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Eliot McIntire, Jean Marchal, Ian Eddy, and Tati Micheletti</p>
<p>Eliot McIntire and Jean Marchal</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"terra"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span>,<span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span>, vals <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">tf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".tif"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">writeOutputs</span><span class="op">(</span><span class="va">r</span>, <span class="va">tf</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">    writing...</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">...done in 0.0131 secs</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 10, 10, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 10, 10  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : 0, 100, 0, 100  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. :  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source      : file18a17761e4e8.tif </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        : lyr.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   :     1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   :   100 </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eliot J B McIntire, Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

