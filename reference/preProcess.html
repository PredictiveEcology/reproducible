<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download, Checksum, Extract files — preProcessParams • reproducible</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download, Checksum, Extract files — preProcessParams"><meta property="og:description" content="This does downloading (via downloadFile), checksumming (Checksums),
and extracting from archives (extractFromArchive), plus cleaning up of input
arguments (e.g., paths, function names).
This is the first stage of three used in prepInputs."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproducible</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Intro-to-Cache.html">Introduction to Cache</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PredictiveEcology/reproducible/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download, Checksum, Extract files</h1>
    <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/reproducible/blob/HEAD/R/preProcess.R" class="external-link"><code>R/preProcess.R</code></a></small>
    <div class="hidden name"><code>preProcess.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This does downloading (via <code>downloadFile</code>), checksumming (<code>Checksums</code>),
and extracting from archives (<code>extractFromArchive</code>), plus cleaning up of input
arguments (e.g., paths, function names).
This is the first stage of three used in <code>prepInputs</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">preProcessParams</span><span class="op">(</span>n <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">preProcess</span><span class="op">(</span></span>
<span>  targetFile <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  archive <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alsoExtract <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  destinationPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.destinationPath"</span>, <span class="st">"."</span><span class="op">)</span>,</span>
<span>  fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dlFun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quick <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.quick"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.overwrite"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  purge <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"reproducible.verbose"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  <span class="va">.tempPath</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>n</dt>
<dd><p>Number of non-null arguments passed to <code>preProcess</code>.
E.g., passing <code>n = 1</code> returns combinations with only a single non-NULL parameter.
If <code>NULL</code> (default), all parameter combinations are returned.</p></dd>


<dt>targetFile</dt>
<dd><p>Character string giving the filename (without relative or
absolute path) to the eventual file
(raster, shapefile, csv, etc.) after downloading and extracting from a zip
or tar archive. This is the file <em>before</em> it is passed to
<code>postProcess</code>. The internal checksumming does not checksum
the file after it is <code>postProcess</code>ed (e.g., cropped/reprojected/masked).
Using <code>Cache</code> around <code>prepInputs</code> will do a sufficient job in these cases.
See table in <code>preProcess()</code>.</p></dd>


<dt>url</dt>
<dd><p>Optional character string indicating the URL to download from.
If not specified, then no download will be attempted. If not entry
exists in the <code>CHECKSUMS.txt</code> (in <code>destinationPath</code>), an entry
will be created or appended to. This <code>CHECKSUMS.txt</code> entry will be used
in subsequent calls to
<code>prepInputs</code> or <code>preProcess</code>, comparing the file on hand with the ad hoc
<code>CHECKSUMS.txt</code>. See table in <code>preProcess()</code>.</p></dd>


<dt>archive</dt>
<dd><p>Optional character string giving the path of an archive
containing <code>targetFile</code>, or a vector giving a set of nested archives
(e.g., <code>c("xxx.tar", "inner.zip", "inner.rar")</code>). If there is/are (an) inner
archive(s), but they are unknown, the function will try all until it finds
the <code>targetFile</code>. See table in <code>preProcess()</code>. If it is <code>NA</code>,
then it will <em>not</em> attempt to see it as an archive, even if it has archive-like
file extension (e.g., <code>.zip</code>). This may be useful when an R function
is expecting an archive directly.</p></dd>


<dt>alsoExtract</dt>
<dd><p>Optional character string naming files other than
<code>targetFile</code> that must be extracted from the <code>archive</code>. If
<code>NULL</code>, the default, then it will extract all files. Other options:
<code>"similar"</code> will extract all files with the same filename without
file extension as <code>targetFile</code>. <code>NA</code> will extract nothing other
than <code>targetFile</code>. A character string of specific file names will cause
only those to be extracted. See table in <code>preProcess()</code>.</p></dd>


<dt>destinationPath</dt>
<dd><p>Character string of a directory in which to download
and save the file that comes from <code>url</code> and is also where the function
will look for <code>archive</code> or <code>targetFile</code>. NOTE (still experimental):
To prevent repeated downloads in different locations, the user can also set
<code>options("reproducible.inputPaths")</code> to one or more local file paths to
search for the file before attempting to download. Default for that option is
<code>NULL</code> meaning do not search locally.</p></dd>


<dt>fun</dt>
<dd><p>Optional. If specified, this will attempt to load whatever
file was downloaded during <code>preProcess</code> via <code>dlFun</code>. This can be either a
function (e.g., sf::st_read), character string (e.g., "base::load"),
NA (for no loading, useful if <code>dlFun</code> already loaded the file) or
if extra arguments are required
in the function call, it must be a quoted call naming
<code>targetFile</code> (e.g., <code>quote(sf::st_read(targetFile, quiet = TRUE))</code>)
as the file path to the file to load. See details and examples below.</p></dd>


<dt>dlFun</dt>
<dd><p>Optional "download function" name, such as <code>"raster::getData"</code>, which does
custom downloading, in addition to loading into R. Still experimental.</p></dd>


<dt>quick</dt>
<dd><p>Logical. This is passed internally to <code><a href="Checksums.html">Checksums()</a></code>
(the quickCheck argument), and to
<code><a href="Cache.html">Cache()</a></code> (the quick argument). This results in faster, though
less robust checking of inputs. See the respective functions.</p></dd>


<dt>overwrite</dt>
<dd><p>Logical. Should downloading and all the other actions occur
even if they pass the checksums or the files are all there.</p></dd>


<dt>purge</dt>
<dd><p>Logical or Integer. <code>0/FALSE</code> (default) keeps existing
<code>CHECKSUMS.txt</code> file and
<code>prepInputs</code> will write or append to it. <code>1/TRUE</code> will deleted the entire
<code>CHECKSUMS.txt</code> file. Other options, see details.</p></dd>


<dt>verbose</dt>
<dd><p>Numeric, -1 silent (where possible), 0 being very quiet,
1 showing more messaging, 2 being more messaging, etc.
Default is 1. Above 3 will output much more information about the internals of
Caching, which may help diagnose Caching challenges. Can set globally with an
option, e.g., <code>options('reproducible.verbose' = 0) to reduce to minimal</code></p></dd>


<dt>.tempPath</dt>
<dd><p>Optional temporary path for internal file intermediate steps.
Will be cleared on.exit from this function.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed to
<code><a href="postProcess.html">postProcess()</a></code> and <code><a href="Cache.html">Cache()</a></code>.
Since <code>...</code> is passed to <code><a href="postProcess.html">postProcess()</a></code>, these will
<code>...</code> will also be passed into the inner
functions, e.g., <code><a href="deprecated.html">cropInputs()</a></code>. Possibly useful other arguments include
<code>dlFun</code> which is passed to <code>preProcess</code>. See details and examples.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with 5 elements: <code>checkSums</code> (the result of a <code>Checksums</code></p>


<p>after downloading), <code>dots</code> (cleaned up <code>...</code>, including deprecated argument checks),
<code>fun</code> (the function to be used to load the <code>preProcess</code>ed object from disk),
and <code>targetFilePath</code> (the fully qualified path to the <code>targetFile</code>).</p>
    </div>
    <div id="combinations-of-targetfile-url-archive-alsoextract">
    <h2>Combinations of <code>targetFile</code>, <code>url</code>, <code>archive</code>, <code>alsoExtract</code></h2>
    


<p>Use <code>preProcessParams()</code> for a table describing various parameter combinations and their
outcomes.</p>
<p><code>*</code> If the <code>url</code> is a file on Google Drive, checksumming will work
even without a <code>targetFile</code> specified because there is an initial attempt
to get the remove file information (e.g., file name). With that, the connection
between the <code>url</code> and the filename used in the <code class="file">CHECKSUMS.txt</code> file can be made.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Eliot McIntire</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eliot J B McIntire, Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

